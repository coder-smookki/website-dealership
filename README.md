# üöó SMK Dealership

<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-5.6-blue?style=for-the-badge&logo=typescript)
![Node.js](https://img.shields.io/badge/Node.js-20+-green?style=for-the-badge&logo=node.js)
![React](https://img.shields.io/badge/React-18.3-blue?style=for-the-badge&logo=react)
![MongoDB](https://img.shields.io/badge/MongoDB-7.0-green?style=for-the-badge&logo=mongodb)
![Fastify](https://img.shields.io/badge/Fastify-5.6-black?style=for-the-badge&logo=fastify)
![Docker](https://img.shields.io/badge/Docker-Ready-blue?style=for-the-badge&logo=docker)

**Production-Ready –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–æ–º –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞**

[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢ [Docker](#-docker-–∑–∞–ø—É—Å–∫-—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚Ä¢ [API Docs](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) ‚Ä¢ [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

</div>

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
  - [Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)](#-docker-–∑–∞–ø—É—Å–∫-—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  - [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫](#-–ª–æ–∫–∞–ª—å–Ω—ã–π-–∑–∞–ø—É—Å–∫-–±–µ–∑-docker)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [Troubleshooting](#-troubleshooting)

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**SMK Dealership** ‚Äî –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Å–∞–ª–æ–Ω–æ–º –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞—è–≤–∫–∞–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª—å—é.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- ‚úÖ **–†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (admin, owner)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–¥–∞–∂–∏ (available, reserved, sold)
- ‚úÖ **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚Äî –ø–æ–∏—Å–∫ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **JWT Authentication** ‚Äî Access Token (15m) + Refresh Token (7d), —Ç–æ–ª—å–∫–æ ID –≤ —Ç–æ–∫–µ–Ω–µ
- ‚úÖ **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** ‚Äî TypeScript + Zod —Å—Ö–µ–º—ã, –±–µ–∑ `any` –∏ `unknown`
- ‚úÖ **XSS –∑–∞—â–∏—Ç–∞** ‚Äî —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- ‚úÖ **Rate Limiting** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- ‚úÖ **Clean Architecture** ‚Äî —Å—Ç—Ä–æ–≥–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Domain/Application/Infrastructure
- ‚úÖ **MongoDB Native Driver** ‚Äî –±–µ–∑ ORM, –ø—Ä—è–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Backend (Fastify 5 + MongoDB)

- üèóÔ∏è **Clean Architecture** ‚Äî Domain/Application/Infrastructure layers
- üîí **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** ‚Äî TypeScript + Zod —Å—Ö–µ–º—ã, –±–µ–∑ `any` –∏ `unknown`
- üóÑÔ∏è **MongoDB Native Driver** ‚Äî –±–µ–∑ ORM, –ø—Ä—è–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—É–ª–∞ (10 max, 1 min)
- üîê **JWT —Å Refresh Tokens** ‚Äî —Ç–æ–ª—å–∫–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–æ–∫–µ–Ω–µ, –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
- üìù **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî Pino logger
- üõ°Ô∏è **Security headers** ‚Äî X-Frame-Options, CSP, HSTS, X-Content-Type-Options
- üìä **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî ownerName/Email –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üö´ **–ë–µ–∑ Mongoose** ‚Äî MongoDB Driver –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚úÖ **Fastify Type Provider Zod** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–æ–≤
- üîÑ **Graceful Shutdown** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### Frontend (React + Vite)

- ‚öõÔ∏è **React 18** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI —Å —Ö—É–∫–∞–º–∏
- üé® **–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω** ‚Äî —á–µ—Ä–Ω–æ-–±–µ–ª–∞—è –ø–∞–ª–∏—Ç—Ä–∞
- üîí **XSS –∑–∞—â–∏—Ç–∞** ‚Äî DOMPurify –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî responsive –¥–∏–∑–∞–π–Ω
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** ‚Äî seamless refresh flow
- üì¶ **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** ‚Äî types/, api/, components/, pages/
- üîê **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API –∫–ª–∏–µ–Ω—Ç—ã** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- üê≥ **Docker Compose** ‚Äî –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- üöÄ **Production ready** ‚Äî multi-stage Docker –æ–±—Ä–∞–∑—ã
- ‚ö° **Nginx reverse proxy** ‚Äî –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤
- üîß **MongoDB –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** ‚Äî —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 20+
- **npm** 9+
- **Docker & Docker Compose** (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏)

---

## üê≥ Docker –∑–∞–ø—É—Å–∫ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose.

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <repository-url>
cd website-dealership
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Node Environment
NODE_ENV=production

# API Configuration
API_PORT=3001
API_HOST=0.0.0.0

# MongoDB Configuration (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
MONGODB_URI=mongodb://mongodb:27017/car-shop

# JWT Configuration
# –í–ê–ñ–ù–û: –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –∫–ª—é—á–∏ (32+ —Å–∏–º–≤–æ–ª–æ–≤)
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏: openssl rand -base64 32
JWT_ACCESS_SECRET=your-super-secret-access-token-change-in-production-min-32-chars
JWT_REFRESH_SECRET=your-super-secret-refresh-token-change-in-production-min-32-chars
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CORS Configuration
CORS_ORIGIN=http://localhost:3000

# Frontend Build (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è production)
VITE_API_URL=
```

**‚ö†Ô∏è –í–ê–ñ–ù–û –¥–ª—è Production:**
- –°–º–µ–Ω–∏—Ç–µ `JWT_ACCESS_SECRET` –∏ `JWT_REFRESH_SECRET` –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ 32+ —Å–∏–º–≤–æ–ª–æ–≤
- –£–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ `CORS_ORIGIN`

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
docker-compose up -d --build
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- **MongoDB** (–ø–æ—Ä—Ç 27017)
- **API** (–ø–æ—Ä—Ç 3001)
- **Web** (–ø–æ—Ä—Ç 3000)

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –ó–∞–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä API
docker-compose exec api sh

# –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
npm run create-admin admin@example.com admin123

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm run seed

# –í—ã–π–¥–∏—Ç–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
exit
```

### 5. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

- üåê **Frontend**: http://localhost:3000
- üîß **API**: http://localhost:3001
- üìö **Swagger**: http://localhost:3001/docs

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f api
docker-compose logs -f web

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–£–î–ê–õ–ò–¢ –î–ê–ù–ù–´–ï –ë–î!)
docker-compose down -v

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart api
```

---

## üíª –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MongoDB –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# Ubuntu/Debian
sudo apt-get install mongodb

# macOS
brew install mongodb-community@7.0

# Windows
# –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å mongodb.com
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB:

```bash
# Linux/macOS
sudo systemctl start mongodb
# –∏–ª–∏
mongod

# Windows
# MongoDB –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
git clone <repository-url>
cd website-dealership

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ–≥–æ monorepo
npm install
```

### 3. –°–æ–∑–¥–∞–π—Ç–µ .env

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Node Environment
NODE_ENV=development

# API Configuration
API_PORT=3001
API_HOST=0.0.0.0

# MongoDB Configuration (–ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
MONGODB_URI=mongodb://localhost:27017/car-shop

# JWT Configuration
JWT_ACCESS_SECRET=your-super-secret-access-token-change-in-production-min-32-chars
JWT_REFRESH_SECRET=your-super-secret-refresh-token-change-in-production-min-32-chars
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CORS Configuration
CORS_ORIGIN=http://localhost:3000

# Frontend Build (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
VITE_API_URL=http://localhost:3001
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
cd apps/api

# –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
npm run create-admin admin@example.com admin123

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm run seed
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
npm run dev
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- API –Ω–∞ http://localhost:3001
- Web –Ω–∞ http://localhost:3000

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**

–û—Ç–∫—Ä–æ–π—Ç–µ 2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1 - API
cd apps/api
npm run dev

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 - Web
cd apps/web
npm run dev
```

### 6. Production —Å–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ API
cd apps/api
npm run build
npm start

# –°–±–æ—Ä–∫–∞ Web
cd apps/web
npm run build
npm run preview
```

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **Fastify** | 5.6 | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **MongoDB Driver** | 6.10 | –ù–∞—Ç–∏–≤–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –±–µ–∑ ORM |
| **TypeScript** | 5.6 | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è |
| **JWT** | 9.0 | Access + Refresh —Ç–æ–∫–µ–Ω—ã |
| **Zod** | 4.2 | –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º |
| **fastify-type-provider-zod** | 6.1 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Zod —Å Fastify |
| **Pino** | 9.4 | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **bcryptjs** | 2.4 | –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π |
| **@fastify/cors** | 11.2 | CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| **@fastify/swagger** | 9.6 | API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| **@fastify/swagger-ui** | 5.2 | Swagger UI |

### Frontend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **React** | 18.3 | UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| **Vite** | 5.4 | –°–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä |
| **TypeScript** | 5.6 | –¢–∏–ø–∏–∑–∞—Ü–∏—è |
| **React Router** | 6.26 | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è |
| **Zustand** | 5.0 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º |
| **Axios** | 1.7 | HTTP –∫–ª–∏–µ–Ω—Ç —Å interceptors |
| **DOMPurify** | 3.0 | XSS –∑–∞—â–∏—Ç–∞ |

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend Architecture (Clean Architecture + SOLID)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Presentation Layer (HTTP)                ‚îÇ
‚îÇ  ‚Ä¢ Controllers (—Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP)           ‚îÇ
‚îÇ  ‚Ä¢ Routes (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å Zod —Å—Ö–µ–º–∞–º–∏)         ‚îÇ
‚îÇ  ‚Ä¢ Middlewares (auth, requireRole)              ‚îÇ
‚îÇ  ‚Ä¢ Plugins (CORS, Security, Logger, Swagger)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Application Layer (Business Logic)        ‚îÇ
‚îÇ  ‚Ä¢ Services (auth, cars, leads, users...)        ‚îÇ
‚îÇ  ‚Ä¢ Token Service (JWT —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Domain Layer (Business Rules)            ‚îÇ
‚îÇ  ‚Ä¢ Entities (User, Car, Lead, Settings)          ‚îÇ
‚îÇ  ‚Ä¢ Interfaces (IDataSource)                      ‚îÇ
‚îÇ  ‚Ä¢ Error classes (ValidationError, NotFound...)  ‚îÇ
‚îÇ  ‚Ä¢ DTOs (CreateUserDTO, UpdateCarDTO...)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       Infrastructure Layer (Data Access)         ‚îÇ
‚îÇ  ‚Ä¢ MongoDataSource (Singleton pattern)          ‚îÇ
‚îÇ  ‚Ä¢ Database Client (connection pool)             ‚îÇ
‚îÇ  ‚Ä¢ Collections (typed collections)                ‚îÇ
‚îÇ  ‚Ä¢ Shutdown Manager (graceful shutdown)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **MongoDB Native Driver –≤–º–µ—Å—Ç–æ Mongoose** ‚Äî –ø—Ä—è–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –Ω–µ—Ç ORM overhead
2. **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî ownerName/Email –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
3. **Singleton –¥–ª—è –ë–î** ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø—É–ª–æ–º (10 max, 1 min)
4. **JWT Library** ‚Äî jsonwebtoken –Ω–∞–ø—Ä—è–º—É—é, —Ç–æ–ª—å–∫–æ ID –≤ —Ç–æ–∫–µ–Ω–µ
5. **Global Error Handler** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –±–µ–∑ try/catch
6. **Domain-Driven Design** ‚Äî —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤
7. **Security by Design** ‚Äî rate limiting, headers, CORS, XSS –∑–∞—â–∏—Ç–∞
8. **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** ‚Äî Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö —Ä–æ—É—Ç–æ–≤, TypeScript –±–µ–∑ `any`/`unknown`
9. **Fastify Type Provider Zod** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è

---

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### Swagger UI

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- **http://localhost:3001/docs**

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–π–Ω—Ç—ã

#### üîì Public (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/api/cars` | –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (—Ç–æ–ª—å–∫–æ approved) |
| `GET` | `/api/cars/:id` | –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è |
| `GET` | `/api/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ |
| `POST` | `/api/leads` | –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É |

#### üîê Auth

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `POST` | `/api/auth/login` | –í—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç access + refresh) |
| `POST` | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ |
| `POST` | `/api/auth/refresh` | –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã |
| `POST` | `/api/auth/logout` | –í—ã—Ö–æ–¥ (revoke refresh token) |
| `GET` | `/api/auth/me` | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

#### üë§ Owner (—Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å owner)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/api/my/cars` | –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| `GET` | `/api/my/cars/:id` | –î–µ—Ç–∞–ª–∏ –º–æ–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| `POST` | `/api/my/cars` | –°–æ–∑–¥–∞—Ç—å (pending) |
| `PATCH` | `/api/my/cars/:id/status` | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å |

#### üë®‚Äçüíº Admin (—Ç—Ä–µ–±—É–µ—Ç —Ä–æ–ª—å admin)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| `GET` | `/api/admin/cars` | –í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| `GET` | `/api/admin/cars/:id` | –î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è |
| `POST` | `/api/admin/cars` | –°–æ–∑–¥–∞—Ç—å (approved) |
| `PATCH` | `/api/admin/cars/:id` | –û–±–Ω–æ–≤–∏—Ç—å |
| `DELETE` | `/api/admin/cars/:id` | –£–¥–∞–ª–∏—Ç—å |
| `PATCH` | `/api/admin/cars/:id/moderate` | –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å |
| `GET` | `/api/admin/leads` | –í—Å–µ –∑–∞—è–≤–∫–∏ |
| `GET` | `/api/admin/leads/:id` | –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ |
| `PATCH` | `/api/admin/leads/:id` | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ |
| `GET` | `/api/admin/users` | –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |
| `GET` | `/api/admin/users/:id` | –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `POST` | `/api/admin/users` | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `PATCH` | `/api/admin/users/:id` | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `GET` | `/api/admin/settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ |
| `PUT` | `/api/admin/settings` | –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

### Response Format

**Success:**
```json
{
  "success": true,
  "data": { ... }
}
```

**Error:**
```json
{
  "success": false,
  "error": {
    "message": "Error message",
    "code": "ERROR_CODE"
  }
}
```

### Query Parameters

#### GET /api/cars

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|-----|----------|--------|
| `page` | number | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã | `1` |
| `limit` | number | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (max 1000) | `20` |
| `q` | string | –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å | `BMW` |
| `brand` | string | –§–∏–ª—å—Ç—Ä –ø–æ –±—Ä–µ–Ω–¥—É | `Mercedes-Benz` |
| `yearFrom` | number | –ì–æ–¥ –æ—Ç | `2020` |
| `yearTo` | number | –ì–æ–¥ –¥–æ | `2024` |
| `priceFrom` | number | –¶–µ–Ω–∞ –æ—Ç | `1000000` |
| `priceTo` | number | –¶–µ–Ω–∞ –¥–æ | `5000000` |
| `fuelType` | string | –¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞ | `–ë–µ–Ω–∑–∏–Ω` |
| `transmission` | string | –ö–ü–ü | `–ê–≤—Ç–æ–º–∞—Ç` |
| `drive` | string | –ü—Ä–∏–≤–æ–¥ | `–ü–æ–ª–Ω—ã–π` |
| `status` | string | –°—Ç–∞—Ç—É—Å | `available`, `reserved`, `sold` |
| `sort` | string | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ | `priceAsc`, `priceDesc`, `yearDesc` |

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
website-dealership/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ api/                          # Backend API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/              # Domain Layer (Clean Architecture)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/       # User, Car, Lead, Settings
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interfaces/     # IDataSource
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors/         # DomainErrors
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/              # env.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # HTTP handlers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Business logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/                  # Infrastructure layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ datasource.ts   # Singleton MongoDB client
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts       # Database connection
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ collections.ts  # Typed collections
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/        # auth, requireRole
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/             # public, auth, owner, admin
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plugins/            # cors, security, logger, swagger
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # errors, response
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scripts/            # createAdmin, seed
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shutdown.ts         # Graceful shutdown
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts           # Entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile              # Multi-stage build
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ web/                          # Frontend React
‚îÇ       ‚îú‚îÄ‚îÄ src/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api/                 # API clients
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ components/          # React components
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # Pages (public, owner, admin)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ store/              # Zustand stores
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ types/              # TypeScript interfaces
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # sanitize.ts (DOMPurify)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
‚îÇ       ‚îú‚îÄ‚îÄ public/                  # Static assets
‚îÇ       ‚îú‚îÄ‚îÄ nginx.conf              # Production nginx config
‚îÇ       ‚îî‚îÄ‚îÄ vite.config.ts
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml               # 3 services: mongodb, api, web
‚îú‚îÄ‚îÄ .env                             # Environment variables
‚îú‚îÄ‚îÄ package.json                     # Root workspace
‚îî‚îÄ‚îÄ README.md
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

| –ú–µ—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **JWT Authentication** | Access Token (15m) + Refresh Token (7d) –≤ –ë–î, —Ç–æ–ª—å–∫–æ ID –≤ —Ç–æ–∫–µ–Ω–µ |
| **XSS Protection** | DOMPurify –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö |
| **Rate Limiting** | –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ |
| **Security Headers** | X-Frame-Options, CSP, HSTS, X-Content-Type-Options |
| **Input Validation** | Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **Error Handling** | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–µ–∑ —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ |
| **CORS** | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ origins |
| **Password Hashing** | bcryptjs —Å salt rounds 10 |
| **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** | TypeScript –±–µ–∑ `any` –∏ `unknown` |

### Token Flow

```
Login ‚Üí Access (15m, —Ç–æ–ª—å–∫–æ ID) + Refresh (7d, —Ç–æ–ª—å–∫–æ ID) ‚Üí Store refresh in DB
Access expires ‚Üí Send refresh ‚Üí New token pair
Logout ‚Üí Revoke refresh from DB
–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
```

**–í–∞–∂–Ω–æ:** –í JWT —Ç–æ–∫–µ–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (role, email) –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–º–µ–Ω—É –¥–∞–Ω–Ω—ã—Ö.

---

## üêõ Troubleshooting

### MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ MongoDB –∑–∞–ø—É—â–µ–Ω
docker-compose ps mongodb

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs mongodb

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URI –≤ .env
MONGODB_URI=mongodb://mongodb:27017/car-shop
```

### API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Zod —Å—Ö–µ–º–∞–º. –°–º–æ—Ç—Ä–∏—Ç–µ Swagger UI –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:3001/docs –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å—Ö–µ–º.

### Frontend –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. API –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
2. –í `.env` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `VITE_API_URL` (–ø—É—Å—Ç–æ –¥–ª—è production, `http://localhost:3001` –¥–ª—è dev)
3. Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl http://localhost:3001/api/settings

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx config
docker-compose exec web cat /etc/nginx/conf.d/default.conf
```

### CORS –æ—à–∏–±–∫–∏

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `CORS_ORIGIN` –≤ `.env` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–¥—Ä–µ—Å—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

```env
# Development
CORS_ORIGIN=http://localhost:3000

# Production
CORS_ORIGIN=https://yourdomain.com
```

### –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"admin123"}'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å accessToken –∏ refreshToken
```

### –û—à–∏–±–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ Fastify

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `FST_ERR_PLUGIN_VERSION_MISMATCH`, —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–ª–∞–≥–∏–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –≤–µ—Ä—Å–∏–π, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Å Fastify 5:

```bash
cd apps/api
npm install @fastify/cors@latest @fastify/formbody@latest @fastify/swagger@latest @fastify/swagger-ui@latest
```

---

## üìù –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–∏–∑ –∫–æ—Ä–Ω—è)
npm run dev              # API + Web –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
npm run dev:api          # –¢–æ–ª—å–∫–æ API
npm run dev:web          # –¢–æ–ª—å–∫–æ Web

# –°–±–æ—Ä–∫–∞
npm run build            # –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
npm run build:api        # –°–±–æ—Ä–∫–∞ API (TypeScript ‚Üí JS)
npm run build:web        # –°–±–æ—Ä–∫–∞ Web (Vite)

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint             # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
npm run lint:fix         # –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏
npm run format           # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

# API –∫–æ–º–∞–Ω–¥—ã
cd apps/api
npm run create-admin     # –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
npm run seed             # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run seed:clear       # –û—á–∏—Å—Ç–∏—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ
```

---

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)

- ‚úÖ –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
- ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞

**–í—Ö–æ–¥:** `/admin/login`

### üë§ –í–ª–∞–¥–µ–ª–µ—Ü (owner)

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `/account/register`  
**–í—Ö–æ–¥:** `/account/login`

---

## üîß –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Backend

- **Zod —Å—Ö–µ–º—ã** ‚Äî –≤—Å–µ —Ä–æ—É—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **Fastify Type Provider Zod** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** ‚Äî –±–µ–∑ `any` –∏ `unknown` –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- **MongoDB —Ç–∏–ø—ã** ‚Äî `Filter<T>` –∏ `UpdateFilter<T>` –≤–º–µ—Å—Ç–æ `Record<string, unknown>`

### Frontend

- **TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- **–¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API –∫–ª–∏–µ–Ω—Ç—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤
- **DOMPurify** ‚Äî —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è **SMK Dealership**. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**smokkkkiiii Ilin Kirill**

---

<div align="center">

**‚≠ê If you find this project useful, give it a star! ‚≠ê**

Made with ‚ù§Ô∏è using Clean Architecture, TypeScript, React, Fastify, and MongoDB

</div>
